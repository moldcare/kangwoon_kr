<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="simulation.jisu.pageTitle">ì§€ìˆ˜(Jisu) AI - ì—…ë¬´ë¶„ì„ ì‹¤ì œ ì—…ë¬´ ì‹œë®¬ë ˆì´ì…˜ | í‚¨í”„ë¦¬</title>
    <meta name="description" content="" data-i18n-content="simulation.jisu.pageDescription">
    <link rel="stylesheet" href="simulation-theme.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" href="../images/favicon.png" type="image/png">
    <style>
        /* ì§€ìˆ˜ ì „ìš© ìŠ¤íƒ€ì¼ (ì´ˆë¡ìƒ‰ í…Œë§ˆ) */
        body {
            background: var(--sim-gradient-jisu);
        }

        .simulation-step {
            background: var(--sim-glass);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            margin: var(--space-6) 0;
            border: 1px solid var(--sim-glass-border);
            opacity: 0;
            transform: translateY(20px);
            animation: slideUp 0.6s ease-out forwards;
        }

        .step-title {
            font-size: var(--text-xl);
            font-weight: var(--weight-bold);
            color: white;
            margin-bottom: var(--space-4);
        }

        .ai-message {
            background: rgba(22, 163, 74, 0.2);
            border-left: 4px solid white;
            padding: var(--space-4);
            margin: var(--space-4) 0;
            border-radius: var(--radius-lg);
            font-style: italic;
        }

        .typing-effect {
            overflow: hidden;
            white-space: nowrap;
            animation: typing 3s steps(60, end), blink-caret 0.5s step-end infinite;
            border-right: 2px solid white;
        }

        @keyframes typing {
            from { max-width: 0; }
            to { max-width: 100%; }
        }

        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: #16A34A; }
        }

        .progress-bar {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--radius-lg);
            height: 30px;
            margin: var(--space-4) 0;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            background: linear-gradient(90deg, #16A34A, #22C55E);
            height: 100%;
            border-radius: var(--radius-lg);
            transition: width 0.5s ease;
            box-shadow: 0 0 15px rgba(22, 163, 74, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .progress-text {
            color: white;
            font-weight: var(--weight-medium);
            font-size: var(--text-sm);
        }

        .data-collection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-4);
            margin: var(--space-6) 0;
        }

        .employee-card {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            border: 1px solid rgba(22, 163, 74, 0.3);
        }

        .employee-name {
            font-weight: var(--weight-bold);
            color: white;
            margin-bottom: var(--space-3);
            font-size: var(--text-lg);
        }

        .activity-list {
            line-height: 1.6;
            font-size: var(--text-sm);
        }

        .report-section {
            margin: var(--space-6) 0;
        }

        .report-title {
            font-size: var(--text-lg);
            font-weight: var(--weight-bold);
            color: white;
            margin-bottom: var(--space-4);
            padding: var(--space-3);
            background: rgba(22, 163, 74, 0.2);
            border-radius: var(--radius-lg);
        }

        .recommendation {
            background: rgba(16, 185, 129, 0.2);
            border-left: 4px solid #10B981;
            padding: var(--space-3);
            margin: var(--space-2) 0;
            border-radius: var(--radius-md);
        }

        .warning {
            background: rgba(249, 115, 22, 0.2);
            border-left: 4px solid #F97316;
            padding: var(--space-3);
            margin: var(--space-2) 0;
            border-radius: var(--radius-md);
        }

        .productivity-chart {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-4);
            margin: var(--space-4) 0;
        }

        .chart-item {
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            padding: var(--space-4);
            border-radius: var(--radius-lg);
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .chart-number {
            font-size: var(--text-3xl);
            font-weight: var(--weight-bold);
            color: #16A34A;
            margin-bottom: var(--space-2);
        }

        .department-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-4);
            margin: var(--space-4) 0;
        }

        .dept-card {
            background: var(--sim-glass);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            border: 1px solid var(--sim-glass-border);
        }

        .dept-name {
            font-weight: var(--weight-bold);
            color: white;
            margin-bottom: var(--space-3);
            font-size: var(--text-lg);
        }

        .project-status {
            margin: var(--space-4) 0;
        }

        .project-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-3);
            margin: var(--space-2) 0;
            background: var(--sim-glass);
            border-radius: var(--radius-md);
            border: 1px solid var(--sim-glass-border);
        }

        .status-badge {
            padding: var(--space-1) var(--space-3);
            border-radius: var(--radius-lg);
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
        }

        .status-progress { 
            background: #16A34A; 
            color: white; 
        }
        .status-complete { 
            background: #10B981; 
            color: white; 
        }
        .status-delayed { 
            background: #EF4444; 
            color: white; 
        }

        .insight-box {
            background: linear-gradient(135deg, rgba(22, 163, 74, 0.3), rgba(34, 197, 94, 0.3));
            border: 2px solid #16A34A;
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            margin: var(--space-6) 0;
        }

        .insight-title {
            font-size: var(--text-lg);
            font-weight: var(--weight-bold);
            color: white;
            margin-bottom: var(--space-4);
        }

        @keyframes slideUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .data-collection,
            .productivity-chart,
            .department-breakdown {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    
    <!-- ì‹œë®¬ë ˆì´ì…˜ ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav class="sim-nav">
        <div class="nav-brand">
            <a href="../index.html">
                <img src="../images/logo-sq-w.png" alt="í‚¨í”„ë¦¬" class="logo">
                <span>KINFRI</span>
            </a>
        </div>
        <div class="nav-menu">
            <a href="airi-simulation.html" class="nav-link" data-i18n="simulation.airi.navName">ì•„ì´ë¦¬</a>
            <a href="gyeonu-simulation.html" class="nav-link" data-i18n="simulation.gyeonu.navName">ê²¬ìš°</a>
            <a href="jisu-simulation.html" class="nav-link active" data-i18n="simulation.jisu.navName">ì§€ìˆ˜</a>
            <a href="doyoung-simulation.html" class="nav-link" data-i18n="simulation.doyoung.navName">ë„ì˜</a>
            <a href="minseo-simulation.html" class="nav-link" data-i18n="simulation.minseo.navName">ë¯¼ì„œ</a>
        </div>
        <div class="nav-actions">
            <select class="language-select" data-lang-select aria-label="ì–¸ì–´ ì„ íƒ" data-i18n-aria-label="aria.langSelect">
                <option value="ko">í•œêµ­ì–´</option>
                <option value="en">English</option>
                <option value="zh">ä¸­æ–‡</option>
                <option value="vi">Tiáº¿ng Viá»‡t</option>
                <option value="ja">æ—¥æœ¬èª</option>
                <option value="th">à¹„à¸—à¸¢</option>
                <option value="id">Bahasa Indonesia</option>
            </select>
            <a href="../index.html" class="back-link" data-i18n="nav.backHome">ë©”ì¸ í˜ì´ì§€ë¡œ</a>
        </div>
    </nav>

    <!-- ì‹œë®¬ë ˆì´ì…˜ ì»¨í…Œì´ë„ˆ -->
    <div class="sim-container">
        <!-- í—¤ë” -->
        <header class="sim-header">
            <div class="ai-character">
                <div class="ai-avatar">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="ai-info">
                    <h1 data-i18n="simulation.jisu.title">ì§€ìˆ˜ - ì—…ë¬´ë¶„ì„ AI</h1>
                    <p class="ai-subtitle" data-i18n="simulation.jisu.subtitle">ì§ì›ë“¤ì˜ ì—…ë¬´ë¥¼ ë¶„ì„í•˜ì—¬ ëŒ€í‘œë‹˜ê»˜ ì¸ì‚¬ì´íŠ¸ ë³´ê³ ì„œë¥¼ ìƒì„±í•˜ëŠ” ë¶„ì„ ì „ë¬¸ AI</p>
                </div>
            </div>
        </header>

        <!-- ì‹œë‚˜ë¦¬ì˜¤ ì†Œê°œ -->
        <section class="scenario-intro" id="intro">
            <div class="content-card">
                <div class="card-header">
                    <h2 data-i18n="simulation.jisu.scenarioTitle">ğŸ“Š ì‹œë‚˜ë¦¬ì˜¤: ì›”ë§ ì—…ë¬´ ë¶„ì„ ë³´ê³ </h2>
                    <span class="time-badge" data-i18n="simulation.jisu.timeRange">ì˜¤í›„ 6:00</span>
                </div>
                <div class="scenario-content">
                    <p><strong data-i18n="simulation.jisu.situationLabel">ìƒí™©:</strong> <span data-i18n="simulation.jisu.situationText">ëŒ€í‘œë‹˜ì´ ì§ì›ë“¤ì˜ ì´ë²ˆ ë‹¬ ì—…ë¬´ í˜„í™© ë¶„ì„ì„ ìš”ì²­</span></p>
                    <p><strong data-i18n="simulation.jisu.problemLabel">ë¬¸ì œ:</strong> <span data-i18n="simulation.jisu.problemText">50ëª… ì§ì›ì˜ ì—…ë¬´ ë°ì´í„°ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ë¶„ì„í•˜ê¸° ì–´ë ¤ì›€</span></p>
                    <p><strong data-i18n="simulation.jisu.roleLabel">ì§€ìˆ˜ì˜ ì—­í• :</strong> <span data-i18n="simulation.jisu.roleText">ëª¨ë“  ì—…ë¬´ ë°ì´í„°ë¥¼ ìë™ ë¶„ì„í•˜ì—¬ ì¸ì‚¬ì´íŠ¸ ë„ì¶œ</span></p>
                </div>
                <div style="text-align: center; margin-top: 2rem;">
                    <button class="consult-btn" id="startBtn" data-i18n="simulation.jisu.startButton">
                        ğŸ“Š ì—…ë¬´ë¶„ì„ ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘
                    </button>
                </div>
            </div>
        </section>

        <!-- ì‹œë®¬ë ˆì´ì…˜ ì§„í–‰ -->
        <section class="simulation-section" id="simulation" style="display: none;">
            <!-- ì‹œë®¬ë ˆì´ì…˜ ì˜ì—­ -->
            <div id="simulationArea">
                <!-- ì‹œë®¬ë ˆì´ì…˜ ë‹¨ê³„ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
        </section>

        <!-- ì‹œë®¬ë ˆì´ì…˜ ê²°ê³¼ -->
        <section class="simulation-result" id="result" style="display: none;">
            <div class="content-card">
                <div class="card-header">
                    <h2 data-i18n="simulation.jisu.resultTitle">ğŸ¯ ì—…ë¬´ë¶„ì„ ì‹œë®¬ë ˆì´ì…˜ ì™„ë£Œ!</h2>
                </div>
                <div class="scenario-content">
                    <p data-i18n="simulation.jisu.resultText1">ì§€ìˆ˜ê°€ 50ëª… ì§ì›ì˜ ì—…ë¬´ë¥¼ ìë™ ë¶„ì„í•˜ê³  ì¸ì‚¬ì´íŠ¸ ë³´ê³ ì„œë¥¼ ì™„ì„±í–ˆìŠµë‹ˆë‹¤!</p>
                    <p data-i18n="simulation.jisu.resultText2">ì‹¤ì œë¡œ í‚¨í”„ë¦¬ì˜ AI AgentëŠ” ì´ëŸ° ë°©ì‹ìœ¼ë¡œ ì—…ë¬´ ë¶„ì„ì„ ìë™í™”í•©ë‹ˆë‹¤.</p>
                </div>
                
                <div style="text-align: center; margin-top: 2rem;">
                    <div class="action-buttons">
                        <a href="../index.html#contact" class="consult-btn primary">
                            <i class="fas fa-comments"></i>
                            <span data-i18n="nav.freeConsult">ë¬´ë£Œ ìƒë‹´ ì‹ ì²­</span>
                        </a>
                        <a href="../index.html" class="consult-btn secondary">
                            <i class="fas fa-home"></i>
                            <span data-i18n="nav.backHome">ë©”ì¸ í˜ì´ì§€ë¡œ</span>
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script src="/js/i18n.js" defer></script>
    <script>
        // AIRI ë°©ì‹: ë²ˆì—­ í‚¤ë¥¼ ì‚¬ìš©í•œ ì‹œë®¬ë ˆì´ì…˜ ë°ì´í„° êµ¬ì¡°
        const simulationData = [
            {
                step: 1,
                titleKey: "simulation.jisu.step1.title",
                messageKey: "simulation.jisu.step1.message",
                progressTextKey: "simulation.jisu.step1.progressText",
                progressId: "collectionProgress",
                progressTarget: 30,
                marketingTitleKey: "simulation.jisu.step1.marketingTitle",
                marketingContentKey: "simulation.jisu.step1.marketingContent",
                devTitleKey: "simulation.jisu.step1.devTitle", 
                devContentKey: "simulation.jisu.step1.devContent",
                salesTitleKey: "simulation.jisu.step1.salesTitle",
                salesContentKey: "simulation.jisu.step1.salesContent"
            },
            {
                step: 2,
                titleKey: "simulation.jisu.step2.title",
                messageKey: "simulation.jisu.step2.message",
                progressTextKey: "simulation.jisu.step2.progressText",
                progressId: "analysisProgress",
                progressTarget: 65,
                analysisTitle: "simulation.jisu.step2.analysisTitle",
                recommendation1Key: "simulation.jisu.step2.recommendation1",
                recommendation2Key: "simulation.jisu.step2.recommendation2",
                warningKey: "simulation.jisu.step2.warning"
            },
            {
                step: 3,
                titleKey: "simulation.jisu.step3.title",
                messageKey: "simulation.jisu.step3.message",
                progressTextKey: "simulation.jisu.step3.progressText",
                progressId: "calculationProgress",
                progressTarget: 85,
                marketingProductivityKey: "simulation.jisu.step3.marketingProductivity",
                devProductivityKey: "simulation.jisu.step3.devProductivity",
                salesProductivityKey: "simulation.jisu.step3.salesProductivity",
                overallAverageKey: "simulation.jisu.step3.overallAverage",
                marketingDetailKey: "simulation.jisu.step3.marketingDetail",
                devDetailKey: "simulation.jisu.step3.devDetail",
                salesDetailKey: "simulation.jisu.step3.salesDetail"
            },
            {
                step: 4,
                titleKey: "simulation.jisu.step4.title",
                messageKey: "simulation.jisu.step4.message",
                progressTextKey: "simulation.jisu.step4.progressText",
                progressId: "reportProgress",
                progressTarget: 100,
                projectTitleKey: "simulation.jisu.step4.projectTitle",
                project1Key: "simulation.jisu.step4.project1",
                project2Key: "simulation.jisu.step4.project2",
                project3Key: "simulation.jisu.step4.project3",
                project4Key: "simulation.jisu.step4.project4",
                status1Key: "simulation.jisu.step4.status1",
                status2Key: "simulation.jisu.step4.status2",
                status3Key: "simulation.jisu.step4.status3",
                status4Key: "simulation.jisu.step4.status4",
                insightTitleKey: "simulation.jisu.step4.insightTitle",
                insight1Key: "simulation.jisu.step4.insight1",
                insight2Key: "simulation.jisu.step4.insight2",
                insight3Key: "simulation.jisu.step4.insight3",
                insight4Key: "simulation.jisu.step4.insight4"
            }
        ];

        let isRunning = false;

        // AIRIì™€ ë™ì¼í•œ ë²ˆì—­ í•¨ìˆ˜
        function getTranslation(key) {
            if (!window.translations || !key) return key;
            
            const currentLang = window.currentLang || document.documentElement.getAttribute('lang') || 'ko';
            const langTranslations = window.translations[currentLang] || window.translations.ko || {};
            
            return key.split('.').reduce((acc, k) => (acc && acc[k] !== undefined ? acc[k] : null), langTranslations) || key;
        }

        // AIRI ë°©ì‹: ì‹¤í–‰ ì‹œì ì— ë²ˆì—­ëœ HTML ìƒì„± í•¨ìˆ˜
        function createSimulationStep(stepData) {
            const stepDiv = document.createElement('div');
            stepDiv.className = 'simulation-step';
            
            const title = getTranslation(stepData.titleKey);
            const message = getTranslation(stepData.messageKey);
            const progressText = getTranslation(stepData.progressTextKey);
            
            let content = `
                <h3 class="step-title">${title}</h3>
                <div class="ai-message typing-effect">
                    ğŸ‘” ${getTranslation('simulation.jisu.aiName')}: "${message}"
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 0%" id="${stepData.progressId}">
                        <div class="progress-text">${progressText}</div>
                    </div>
                </div>
            `;
            
            // ê° ë‹¨ê³„ë³„ íŠ¹ë³„í•œ ì½˜í…ì¸  ì¶”ê°€
            if (stepData.step === 1) {
                const marketingTitle = getTranslation(stepData.marketingTitleKey);
                const marketingContent = getTranslation(stepData.marketingContentKey);
                const devTitle = getTranslation(stepData.devTitleKey);
                const devContent = getTranslation(stepData.devContentKey);
                const salesTitle = getTranslation(stepData.salesTitleKey);
                const salesContent = getTranslation(stepData.salesContentKey);
                
                content += `
                    <div class="data-collection">
                        <div class="employee-card">
                            <div class="employee-name">${marketingTitle}</div>
                            <div class="activity-list">${marketingContent}</div>
                        </div>
                        <div class="employee-card">
                            <div class="employee-name">${devTitle}</div>
                            <div class="activity-list">${devContent}</div>
                        </div>
                        <div class="employee-card">
                            <div class="employee-name">${salesTitle}</div>
                            <div class="activity-list">${salesContent}</div>
                        </div>
                    </div>
                `;
            } else if (stepData.step === 2) {
                const analysisTitle = getTranslation(stepData.analysisTitle);
                const recommendation1 = getTranslation(stepData.recommendation1Key);
                const recommendation2 = getTranslation(stepData.recommendation2Key);
                const warning = getTranslation(stepData.warningKey);
                
                content += `
                    <div class="report-section">
                        <div class="report-title">${analysisTitle}</div>
                        <div class="recommendation">${recommendation1}</div>
                        <div class="recommendation">${recommendation2}</div>
                        <div class="warning">${warning}</div>
                    </div>
                `;
            } else if (stepData.step === 3) {
                content += `
                    <div class="productivity-chart">
                        <div class="chart-item">
                            <div class="chart-number">92%</div>
                            <div>${getTranslation(stepData.marketingProductivityKey)}</div>
                        </div>
                        <div class="chart-item">
                            <div class="chart-number">89%</div>
                            <div>${getTranslation(stepData.devProductivityKey)}</div>
                        </div>
                        <div class="chart-item">
                            <div class="chart-number">75%</div>
                            <div>${getTranslation(stepData.salesProductivityKey)}</div>
                        </div>
                        <div class="chart-item">
                            <div class="chart-number">85%</div>
                            <div>${getTranslation(stepData.overallAverageKey)}</div>
                        </div>
                    </div>
                    <div class="department-breakdown">
                        <div class="dept-card">
                            <div class="dept-name">ğŸ“Š ${getTranslation(stepData.marketingTitleKey)}</div>
                            <div>${getTranslation(stepData.marketingDetailKey)}</div>
                        </div>
                        <div class="dept-card">
                            <div class="dept-name">ğŸ’» ${getTranslation(stepData.devTitleKey)}</div>
                            <div>${getTranslation(stepData.devDetailKey)}</div>
                        </div>
                        <div class="dept-card">
                            <div class="dept-name">ğŸ“ ${getTranslation(stepData.salesTitleKey)}</div>
                            <div>${getTranslation(stepData.salesDetailKey)}</div>
                        </div>
                    </div>
                `;
            } else if (stepData.step === 4) {
                const projectTitle = getTranslation(stepData.projectTitleKey);
                const project1 = getTranslation(stepData.project1Key);
                const project2 = getTranslation(stepData.project2Key);
                const project3 = getTranslation(stepData.project3Key);
                const project4 = getTranslation(stepData.project4Key);
                const status1 = getTranslation(stepData.status1Key);
                const status2 = getTranslation(stepData.status2Key);
                const status3 = getTranslation(stepData.status3Key);
                const status4 = getTranslation(stepData.status4Key);
                const insightTitle = getTranslation(stepData.insightTitleKey);
                const insight1 = getTranslation(stepData.insight1Key);
                const insight2 = getTranslation(stepData.insight2Key);
                const insight3 = getTranslation(stepData.insight3Key);
                const insight4 = getTranslation(stepData.insight4Key);
                
                content += `
                    <div class="report-section">
                        <div class="report-title">${projectTitle}</div>
                        <div class="project-status">
                            <div class="project-item">
                                <span>${project1}</span>
                                <span class="status-badge status-progress">${status1}</span>
                            </div>
                            <div class="project-item">
                                <span>${project2}</span>
                                <span class="status-badge status-progress">${status2}</span>
                            </div>
                            <div class="project-item">
                                <span>${project3}</span>
                                <span class="status-badge status-complete">${status3}</span>
                            </div>
                            <div class="project-item">
                                <span>${project4}</span>
                                <span class="status-badge status-delayed">${status4}</span>
                            </div>
                        </div>
                    </div>
                    <div class="insight-box">
                        <div class="insight-title">${insightTitle}</div>
                        <div>
                            <p>${insight1}</p>
                            <p>${insight2}</p>
                            <p>${insight3}</p>
                            <p>${insight4}</p>
                        </div>
                    </div>
                `;
            }
            
            stepDiv.innerHTML = content;
            return stepDiv;
        }

        // í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì• ë‹ˆë©”ì´ì…˜ í•¨ìˆ˜
        function animateProgress(progressId, targetPercent, duration = 3000) {
            if (!progressId) return Promise.resolve();
            
            return new Promise(resolve => {
                const progressBar = document.getElementById(progressId);
                if (!progressBar) {
                    resolve();
                    return;
                }

                let currentPercent = 0;
                const increment = targetPercent / (duration / 50);
                
                const interval = setInterval(() => {
                    currentPercent += increment;
                    if (currentPercent >= targetPercent) {
                        currentPercent = targetPercent;
                        clearInterval(interval);
                        setTimeout(resolve, 500);
                    }
                    progressBar.style.width = currentPercent + '%';
                }, 50);
            });
        }

        // ìë™ ìŠ¤í¬ë¡¤ í•¨ìˆ˜
        function smoothScrollToElement(element, offset = -100) {
            const elementPosition = element.getBoundingClientRect().top;
            const offsetPosition = elementPosition + window.pageYOffset + offset;

            window.scrollTo({
                top: offsetPosition,
                behavior: 'smooth'
            });
        }

        // ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰ í•¨ìˆ˜
        async function runSimulation() {
            const startBtn = document.getElementById('startBtn');
            const simulationArea = document.getElementById('simulationArea');
            const introSection = document.getElementById('intro');
            const simulationSection = document.getElementById('simulation');
            
            if (isRunning) return;
            
            isRunning = true;
            startBtn.textContent = getTranslation('simulation.jisu.running') || 'â³ ì‹œë®¬ë ˆì´ì…˜ ì§„í–‰ ì¤‘...';
            startBtn.disabled = true;
            
            // ì¸íŠ¸ë¡œ ìˆ¨ê¸°ê³  ì‹œë®¬ë ˆì´ì…˜ ë³´ì´ê¸°
            introSection.style.display = 'none';
            simulationSection.style.display = 'block';
            
            // ê¸°ì¡´ ë‚´ìš© ì •ë¦¬
            simulationArea.innerHTML = '';
            document.getElementById('result').style.display = 'none';
            
            // ê° ë‹¨ê³„ë³„ë¡œ ì‹¤í–‰
            for (const stepData of simulationData) {
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                const stepElement = createSimulationStep(stepData);
                simulationArea.appendChild(stepElement);
                
                // ìƒˆë¡œ ì¶”ê°€ëœ ë‹¨ê³„ë¡œ ìë™ ìŠ¤í¬ë¡¤
                smoothScrollToElement(stepElement);
                
                // í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì• ë‹ˆë©”ì´ì…˜
                if (stepData.progressId && stepData.progressTarget) {
                    await new Promise(resolve => setTimeout(resolve, 1500));
                    await animateProgress(stepData.progressId, stepData.progressTarget);
                }
            }

            // ì™„ë£Œ í›„ ì²˜ë¦¬
            await new Promise(resolve => setTimeout(resolve, 2000));
            document.getElementById('result').style.display = 'block';
            // ì™„ë£Œ ë©”ì‹œì§€ë¡œ ìŠ¤í¬ë¡¤
            smoothScrollToElement(document.getElementById('result'));
            
            startBtn.textContent = getTranslation('simulation.jisu.restart') || 'ğŸ”„ ë‹¤ì‹œ ì²´í—˜í•˜ê¸°';
            startBtn.disabled = false;
            isRunning = false;
            
            // ì¬ì‹œì‘ì„ ìœ„í•´ ë‹¤ì‹œ ì„¤ì •
            startBtn.addEventListener('click', function() {
                document.getElementById('intro').style.display = 'block';
                document.getElementById('simulation').style.display = 'none';
                document.getElementById('result').style.display = 'none';
                startBtn.textContent = getTranslation('simulation.jisu.startButton') || 'ğŸ“Š ì—…ë¬´ë¶„ì„ ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘';
                smoothScrollToElement(document.getElementById('intro'));
            }, { once: true });
        }

        // AIRIì™€ ë™ì¼í•œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ íŒ¨í„´
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ“Š ì§€ìˆ˜ AI ì‹œë®¬ë ˆì´ì…˜ì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤!');
            
            // i18n ë¡œë“œ ì™„ë£Œ ëŒ€ê¸°
            setTimeout(() => {
                const startBtn = document.getElementById('startBtn');
                if (startBtn) {
                    startBtn.removeEventListener('click', runSimulation);
                    startBtn.addEventListener('click', runSimulation);
                    console.log('âœ… ì‹œì‘ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ì™„ë£Œ');
                    
                    // ë²ˆì—­ ìƒíƒœ í™•ì¸
                    console.log('ğŸŒ í˜„ì¬ translations:', !!window.translations);
                    if (window.translations) {
                        console.log('ğŸ“ ìƒ˜í”Œ ë²ˆì—­:', getTranslation('simulation.jisu.startButton'));
                    }
                }
            }, 200); // AIRIì™€ ë™ì¼í•œ ëŒ€ê¸° ì‹œê°„
        });
    </script>
</body>
</html>
