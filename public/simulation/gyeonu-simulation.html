<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="simulation.gyeonu.pageTitle">ê²¬ìš°(Gyeonu) AI - ê²¬ì  ì‹œìŠ¤í…œ ì‹¤ì œ ì—…ë¬´ ì‹œë®¬ë ˆì´ì…˜ | í‚¨í”„ë¦¬</title>
    <meta name="description" content="" data-i18n="simulation.gyeonu.pageDescription">
    <link rel="stylesheet" href="simulation-theme.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" href="../images/favicon.png" type="image/png">
    <style>
        /* ê²¬ìš° ì „ìš© ìŠ¤íƒ€ì¼ (ì£¼í™©ìƒ‰ í…Œë§ˆ) */
        body {
            background: var(--sim-gradient-gyeonu);
        }

        .split-view {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-6);
            margin: var(--space-6) 0;
        }

        .before-panel, .after-panel {
            background: var(--sim-glass);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            border: 1px solid var(--sim-glass-border);
        }

        .panel-title {
            font-size: var(--text-lg);
            font-weight: var(--weight-bold);
            margin-bottom: var(--space-4);
            text-align: center;
            padding: var(--space-3);
            border-radius: var(--radius-lg);
        }

        .before-panel .panel-title {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid #EF4444;
        }

        .after-panel .panel-title {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid #10B981;
        }

        .simulation-step {
            background: var(--sim-glass);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            margin: var(--space-6) 0;
            border: 1px solid var(--sim-glass-border);
            opacity: 0;
            transform: translateY(20px);
            animation: slideUp 0.6s ease-out forwards;
        }

        .step-title {
            font-size: var(--text-xl);
            font-weight: var(--weight-bold);
            color: var(--text-lg);
            margin-bottom: var(--space-4);
        }

        .customer-request {
            background: rgba(234, 88, 12, 0.2);
            border: 1px solid var(--secondary-orange);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            margin: var(--space-4) 0;
        }

        .ai-thinking {
            background: rgba(245, 158, 11, 0.2);
            border-left: 4px solid #F59E0B;
            padding: var(--space-4);
            margin: var(--space-4) 0;
            border-radius: var(--radius-lg);
            font-style: italic;
        }

        .typing-effect {
            overflow: hidden;
            white-space: nowrap;
            animation: typing 2s steps(50, end), blink-caret 0.5s step-end infinite;
            border-right: 2px solid var(--secondary-orange);
        }

        @keyframes typing {
            from { max-width: 0; }
            to { max-width: 100%; }
        }

        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: var(--secondary-orange); }
        }

        .progress-container {
            margin: var(--space-6) 0;
        }

        .progress-bar {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--radius-lg);
            height: 30px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            background: linear-gradient(90deg, var(--secondary-orange), #F59E0B);
            height: 100%;
            border-radius: var(--radius-lg);
            transition: width 0.5s ease;
            box-shadow: 0 0 15px rgba(234, 88, 12, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .progress-text {
            color: white;
            font-weight: var(--weight-medium);
            font-size: var(--text-sm);
        }

        .data-analysis {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: var(--space-4);
            margin: var(--space-4) 0;
        }

        .data-card {
            background: rgba(0, 0, 0, 0.3);
            padding: var(--space-4);
            border-radius: var(--radius-lg);
            text-align: center;
        }

        .data-number {
            font-size: var(--text-2xl);
            font-weight: var(--weight-bold);
            color: var(--secondary-orange);
        }

        .quote-result {
            background: linear-gradient(135deg, rgba(234, 88, 12, 0.3), rgba(245, 158, 11, 0.3));
            border: 2px solid var(--secondary-orange);
            border-radius: var(--radius-xl);
            padding: var(--space-8);
            text-align: center;
            margin: var(--space-6) 0;
        }

        .quote-price {
            font-size: 3rem;
            font-weight: var(--weight-bold);
            color: var(--text-lg);
            margin: var(--space-4) 0;
            text-shadow: 0 0 20px rgba(234, 88, 12, 0.5);
        }

        .quote-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: var(--space-4);
            margin: var(--space-6) 0;
        }

        .detail-item {
            background: rgba(0, 0, 0, 0.3);
            padding: var(--space-3);
            border-radius: var(--radius-lg);
            text-align: center;
        }

        .detail-value {
            font-weight: var(--weight-bold);
            color: var(--secondary-orange);
            font-size: var(--text-lg);
        }

        @keyframes slideUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .split-view {
                grid-template-columns: 1fr;
            }
            
            .quote-price {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    
    <!-- ì‹œë®¬ë ˆì´ì…˜ ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav class="sim-nav">
        <div class="nav-brand">
            <a href="../index.html">
                <img src="../images/logo-sq-w.png" alt="í‚¨í”„ë¦¬" class="logo">
                <span>KINFRI</span>
            </a>
        </div>
        <div class="nav-menu">
            <a href="airi-simulation.html" class="nav-link" data-i18n="simulation.airi.navName">ì•„ì´ë¦¬</a>
            <a href="gyeonu-simulation.html" class="nav-link active" data-i18n="simulation.gyeonu.navName">ê²¬ìš°</a>
            <a href="jisu-simulation.html" class="nav-link" data-i18n="simulation.jisu.navName">ì§€ìˆ˜</a>
            <a href="doyoung-simulation.html" class="nav-link" data-i18n="simulation.doyoung.navName">ë„ì˜</a>
            <a href="minseo-simulation.html" class="nav-link" data-i18n="simulation.minseo.navName">ë¯¼ì„œ</a>
        </div>
        <div class="nav-actions">
            <select class="language-select" data-lang-select aria-label="ì–¸ì–´ ì„ íƒ" data-i18n-aria-label="aria.langSelect">
                <option value="ko">í•œêµ­ì–´</option>
                <option value="en">English</option>
                <option value="zh">ä¸­æ–‡</option>
                <option value="vi">Tiáº¿ng Viá»‡t</option>
                <option value="ja">æ—¥æœ¬èª</option>
                <option value="th">à¹„à¸—à¸¢</option>
                <option value="id">Bahasa Indonesia</option>
            </select>
            <a href="../index.html" class="back-link" data-i18n="nav.backHome">ë©”ì¸ í˜ì´ì§€ë¡œ</a>
        </div>
    </nav>

    <!-- ì‹œë®¬ë ˆì´ì…˜ ì»¨í…Œì´ë„ˆ -->
    <div class="sim-container">
        <!-- í—¤ë” -->
        <header class="sim-header">
            <div class="ai-character">
                <div class="ai-avatar">
                    <i class="fas fa-calculator"></i>
                </div>
                <div class="ai-info">
                    <h1 data-i18n="simulation.gyeonu.pageTitle">ê²¬ìš° - ê²¬ì  ì‹œìŠ¤í…œ AI</h1>
                    <p class="ai-subtitle" data-i18n="simulation.gyeonu.pageDescription">10ë¶„ ë§Œì— ì •í™•í•œ ê²¬ì ì„œë¥¼ ë§Œë“œëŠ” ê²¬ì  ì „ë¬¸ AI</p>
                </div>
            </div>
        </header>

        <!-- ì‹œë‚˜ë¦¬ì˜¤ ì†Œê°œ -->
        <section class="scenario-intro" id="intro">
            <div class="content-card">
                <div class="card-header">
                    <h2 data-i18n="simulation.gyeonu.scenarioTitle">ğŸ’¼ ì‹œë‚˜ë¦¬ì˜¤: ê¸‰í•œ ê²¬ì  ìš”ì²­</h2>
                    <span class="time-badge" data-i18n="simulation.gyeonu.timeRange">ì˜¤í›„ 4:30</span>
                </div>
                <div class="scenario-content">
                    <p><strong data-i18n="simulation.gyeonu.situationLabel">ìƒí™©:</strong> <span data-i18n="simulation.gyeonu.situationText">ëŒ€í˜• ê³ ê°ì‚¬ì—ì„œ ë‚´ì¼ê¹Œì§€ ê²¬ì ì„œê°€ í•„ìš”í•˜ë‹¤ê³  ì—°ë½</span></p>
                    <p><strong data-i18n="simulation.gyeonu.problemLabel">ë¬¸ì œ:</strong> <span data-i18n="simulation.gyeonu.problemText">ë³µì¡í•œ ì œí’ˆ êµ¬ì„±ê³¼ ìˆ˜ëŸ‰ìœ¼ë¡œ ì •í™•í•œ ê³„ì‚°ì´ ì–´ë ¤ì›€</span></p>
                    <p><strong data-i18n="simulation.gyeonu.roleLabel">ê²¬ìš°ì˜ ì—­í• :</strong> <span data-i18n="simulation.gyeonu.roleText">10ë…„ì¹˜ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì¦‰ì‹œ ì •í™•í•œ ê²¬ì  ì œê³µ</span></p>
                </div>
                <div style="text-align: center; margin-top: 2rem;">
                    <button class="consult-btn" id="startBtn" data-i18n="simulation.gyeonu.startButton">
                        ğŸ’¼ ê²¬ì  ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘
                    </button>
                </div>
            </div>
        </section>

        <!-- ì‹œë®¬ë ˆì´ì…˜ ì§„í–‰ -->
        <section class="simulation-section" id="simulation" style="display: none;">
            <!-- ë¹„êµ ë·° -->
            <div class="split-view" id="comparisonView" style="display: none;">
                <div class="before-panel">
                    <div class="panel-title" data-i18n="simulation.gyeonu.beforeMethod">âŒ ê¸°ì¡´ ë°©ì‹ (3ì¼ ì†Œìš”)</div>
                    <ul style="line-height: 2;">
                        <li data-i18n="simulation.gyeonu.before1">ğŸ“ ê³ ê° ìš”ì²­ ì ‘ìˆ˜</li>
                        <li data-i18n="simulation.gyeonu.before2">ğŸ” ê³¼ê±° ê²¬ì ì„œ ìˆ˜ë™ ê²€ìƒ‰</li>
                        <li data-i18n="simulation.gyeonu.before3">ğŸ“Š ì—‘ì…€ì—ì„œ ìˆ˜ë™ ê³„ì‚°</li>
                        <li data-i18n="simulation.gyeonu.before4">ğŸ“ ê²¬ì ì„œ ìˆ˜ë™ ì‘ì„±</li>
                        <li data-i18n="simulation.gyeonu.before5">ğŸ‘€ ê²€í†  ë° ìŠ¹ì¸ ëŒ€ê¸°</li>
                        <li data-i18n="simulation.gyeonu.before6">ğŸ“§ ì´ë©”ì¼ ì „ì†¡</li>
                    </ul>
                    <div style="margin-top: 1rem; padding: 1rem; background: rgba(239, 68, 68, 0.2); border-radius: 10px;">
                        <strong data-i18n="simulation.gyeonu.beforeTime">ì†Œìš”ì‹œê°„: 3ì¼</strong><br>
                        <span data-i18n="simulation.gyeonu.beforeAccuracy">ì •í™•ë„: 85%</span><br>
                        <span data-i18n="simulation.gyeonu.beforeStaff">ì¸ë ¥: 2ëª…</span>
                    </div>
                </div>
                
                <div class="after-panel">
                    <div class="panel-title" data-i18n="simulation.gyeonu.afterMethod">âœ… ê²¬ìš° AI ë°©ì‹ (10ë¶„ ì†Œìš”)</div>
                    <ul style="line-height: 2;">
                        <li data-i18n="simulation.gyeonu.after1">âš¡ ì¦‰ì‹œ ìš”ì²­ ë¶„ì„</li>
                        <li data-i18n="simulation.gyeonu.after2">ğŸ¤– 10ë…„ ë°ì´í„° ìë™ ê²€ìƒ‰</li>
                        <li data-i18n="simulation.gyeonu.after3">ğŸ§  AI ê°€ê²© ì˜ˆì¸¡</li>
                        <li data-i18n="simulation.gyeonu.after4">ğŸ“„ ê²¬ì ì„œ ìë™ ìƒì„±</li>
                        <li data-i18n="simulation.gyeonu.after5">ğŸ“§ ì¦‰ì‹œ ì „ì†¡ ê°€ëŠ¥</li>
                    </ul>
                    <div style="margin-top: 1rem; padding: 1rem; background: rgba(16, 185, 129, 0.2); border-radius: 10px;">
                        <strong data-i18n="simulation.gyeonu.afterTime">ì†Œìš”ì‹œê°„: 10ë¶„</strong><br>
                        <span data-i18n="simulation.gyeonu.afterAccuracy">ì •í™•ë„: 96%</span><br>
                        <span data-i18n="simulation.gyeonu.afterStaff">ì¸ë ¥: 0ëª… (ìë™)</span>
                    </div>
                </div>
            </div>

            <!-- ì‹œë®¬ë ˆì´ì…˜ ì˜ì—­ -->
            <div id="simulationArea">
                <!-- ì‹œë®¬ë ˆì´ì…˜ ë‹¨ê³„ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
        </section>

        <!-- ì‹œë®¬ë ˆì´ì…˜ ê²°ê³¼ -->
        <section class="simulation-result" id="result" style="display: none;">
            <div class="content-card">
                <div class="card-header">
                    <h2 data-i18n="simulation.gyeonu.resultTitle">ğŸ¯ ê²¬ì  ì‹œë®¬ë ˆì´ì…˜ ì™„ë£Œ!</h2>
                </div>
                <div class="scenario-content">
                    <p data-i18n="simulation.gyeonu.resultText1">ê²¬ìš°ê°€ 10ë¶„ ë§Œì— ì •í™•í•œ ê²¬ì ì„œë¥¼ ì™„ì„±í–ˆìŠµë‹ˆë‹¤!</p>
                    <p data-i18n="simulation.gyeonu.resultText2">ì‹¤ì œë¡œ í‚¨í”„ë¦¬ì˜ AI AgentëŠ” ì´ëŸ° ë°©ì‹ìœ¼ë¡œ ê²¬ì  ì—…ë¬´ë¥¼ ìë™í™”í•©ë‹ˆë‹¤.</p>
                </div>
                <div style="text-align: center; margin-top: 2rem;">
                    <div class="action-buttons">
                        <a href="../index.html#contact" class="consult-btn primary">
                            <i class="fas fa-comments"></i>
                            <span data-i18n="nav.freeConsult">ë¬´ë£Œ ìƒë‹´ ì‹ ì²­</span>
                        </a>
                        <a href="../index.html" class="consult-btn secondary">
                            <i class="fas fa-home"></i>
                            <span data-i18n="nav.backHome">ë©”ì¸ í˜ì´ì§€ë¡œ</span>
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script src="/js/i18n.js" defer></script>
    <script>
        // ë‹¤êµ­ì–´ ì§€ì›ì„ ìœ„í•œ ê²¬ìš° ì‹œë®¬ë ˆì´ì…˜ ë°ì´í„°
        const simulationSteps = [
            {
                step: 1,
                titleKey: "simulation.gyeonu.step1.title",
                requestTitleKey: "simulation.gyeonu.step1.requestTitle",
                customerKey: "simulation.gyeonu.step1.customer",
                productKey: "simulation.gyeonu.step1.product",
                productDescKey: "simulation.gyeonu.step1.productDesc",
                materialKey: "simulation.gyeonu.step1.material",
                specKey: "simulation.gyeonu.step1.spec",
                surfaceKey: "simulation.gyeonu.step1.surface",
                surfaceDescKey: "simulation.gyeonu.step1.surfaceDesc",
                toleranceKey: "simulation.gyeonu.step1.tolerance",
                deliveryKey: "simulation.gyeonu.step1.delivery",
                deliveryDescKey: "simulation.gyeonu.step1.deliveryDesc",
                aiMessageKey: "simulation.gyeonu.step1.aiMessage"
            },
            {
                step: 2,
                titleKey: "simulation.gyeonu.step2.title",
                aiMessageKey: "simulation.gyeonu.step2.aiMessage",
                progressTextKey: "simulation.gyeonu.step2.progressText",
                totalQuotesKey: "simulation.gyeonu.step2.totalQuotes",
                similarProjectsKey: "simulation.gyeonu.step2.similarProjects",
                sameMaterialKey: "simulation.gyeonu.step2.sameMaterial",
                sameToleranceKey: "simulation.gyeonu.step2.sameTolerance",
                progressId: "searchProgress",
                progressTarget: 45
            }
        ];

        const finalSteps = [
            {
                step: 3,
                titleKey: "simulation.gyeonu.step3.title",
                aiMessageKey: "simulation.gyeonu.step3.aiMessage",
                progressTextKey: "simulation.gyeonu.step3.progressText",
                factorsTitleKey: "simulation.gyeonu.step3.factorsTitle",
                factor1Key: "simulation.gyeonu.step3.factor1",
                factor2Key: "simulation.gyeonu.step3.factor2",
                factor3Key: "simulation.gyeonu.step3.factor3",
                factor4Key: "simulation.gyeonu.step3.factor4",
                factor5Key: "simulation.gyeonu.step3.factor5",
                factor6Key: "simulation.gyeonu.step3.factor6",
                progressId: "analysisProgress",
                progressTarget: 80
            },
            {
                step: 4,
                titleKey: "simulation.gyeonu.step4.title",
                quoteTitleKey: "simulation.gyeonu.step4.quoteTitle",
                priceNoteKey: "simulation.gyeonu.step4.priceNote",
                accuracyKey: "simulation.gyeonu.step4.accuracy",
                progressTextKey: "simulation.gyeonu.step4.progressText",
                accuracyLabelKey: "simulation.gyeonu.step4.accuracyLabel",
                minuteUnitKey: "simulation.gyeonu.step4.minuteUnit",
                timeLabelKey: "simulation.gyeonu.step4.timeLabel",
                autoValueKey: "simulation.gyeonu.step4.autoValue",
                methodLabelKey: "simulation.gyeonu.step4.methodLabel",
                immediateValueKey: "simulation.gyeonu.step4.immediateValue",
                sendLabelKey: "simulation.gyeonu.step4.sendLabel",
                progressId: "finalProgress",
                progressTarget: 100
            }
        ];

        let isRunning = false;

        // ì „ì—­ ë²ˆì—­ í•¨ìˆ˜ (airiì™€ ë™ì¼í•œ ë°©ì‹)
        function getTranslation(key) {
            if (!window.translations || !key) return key;
            
            // í˜„ì¬ ì–¸ì–´ë¡œ ë²ˆì—­ ì‹œë„
            const currentLang = window.currentLang || document.documentElement.getAttribute('lang') || 'ko';
            const langTranslations = window.translations[currentLang] || window.translations.ko || {};
            
            return key.split('.').reduce((acc, k) => (acc && acc[k] !== undefined ? acc[k] : null), langTranslations) || key;
        }

        // ê²¬ìš° ì‹œë®¬ë ˆì´ì…˜ ë‹¨ê³„ë³„ HTML ìƒì„± í•¨ìˆ˜
        function createGyeonuStep(stepData) {
            if (stepData.step === 1) {
                return `
                    <div class="customer-request">
                        <h4>${getTranslation(stepData.requestTitleKey)}</h4>
                        <p><strong>${getTranslation(stepData.customerKey)}</strong> (ì£¼)í…Œí¬ì†”ë£¨ì…˜</p>
                        <p><strong>${getTranslation(stepData.productKey)}</strong> ${getTranslation(stepData.productDescKey)}</p>
                        <p><strong>${getTranslation(stepData.materialKey)}</strong> ìŠ¤í…Œì¸ë¦¬ìŠ¤ ìŠ¤í‹¸ SUS304</p>
                        <p><strong>${getTranslation(stepData.specKey)}</strong> 100mm Ã— 50mm Ã— 15mm</p>
                        <p><strong>${getTranslation(stepData.surfaceKey)}</strong> ${getTranslation(stepData.surfaceDescKey)}</p>
                        <p><strong>${getTranslation(stepData.toleranceKey)}</strong> Â±0.02mm</p>
                        <p><strong>${getTranslation(stepData.deliveryKey)}</strong> ${getTranslation(stepData.deliveryDescKey)}</p>
                    </div>
                    <div class="ai-thinking">
                        ğŸ¤– ${getTranslation(stepData.aiMessageKey)}
                    </div>
                `;
            }
            else if (stepData.step === 2) {
                return `
                    <div class="ai-thinking">
                        ğŸ¤– ${getTranslation(stepData.aiMessageKey)}
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 0%" id="searchProgress">
                                <div class="progress-text">${getTranslation(stepData.progressTextKey)}</div>
                            </div>
                        </div>
                    </div>
                    <div class="data-analysis">
                        <div class="data-card">
                            <div class="data-number">2,847</div>
                            <div>${getTranslation(stepData.totalQuotesKey)}</div>
                        </div>
                        <div class="data-card">
                            <div class="data-number">247</div>
                            <div>${getTranslation(stepData.similarProjectsKey)}</div>
                        </div>
                        <div class="data-card">
                            <div class="data-number">89</div>
                            <div>${getTranslation(stepData.sameMaterialKey)}</div>
                        </div>
                        <div class="data-card">
                            <div class="data-number">34</div>
                            <div>${getTranslation(stepData.sameToleranceKey)}</div>
                        </div>
                    </div>
                `;
            }
            else if (stepData.step === 3) {
                return `
                    <div class="ai-thinking">
                        ğŸ¤– ${getTranslation(stepData.aiMessageKey)}
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 0%" id="analysisProgress">
                                <div class="progress-text">${getTranslation(stepData.progressTextKey)}</div>
                            </div>
                        </div>
                    </div>
                    <h4>${getTranslation(stepData.factorsTitleKey)}</h4>
                    <ul style="margin: 1rem 0; line-height: 2;">
                        <li>${getTranslation(stepData.factor1Key)}</li>
                        <li>${getTranslation(stepData.factor2Key)}</li>
                        <li>${getTranslation(stepData.factor3Key)}</li>
                        <li>${getTranslation(stepData.factor4Key)}</li>
                        <li>${getTranslation(stepData.factor5Key)}</li>
                        <li>${getTranslation(stepData.factor6Key)}</li>
                    </ul>
                `;
            }
            else if (stepData.step === 4) {
                return `
                    <div class="quote-result">
                        <h3>${getTranslation(stepData.quoteTitleKey)}</h3>
                        <div class="quote-price">â‚©4,750,000</div>
                        <p>${getTranslation(stepData.priceNoteKey)}</p>
                        <div style="margin-top: 1rem;">
                            <small>${getTranslation(stepData.accuracyKey)}</small>
                        </div>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 0%" id="finalProgress">
                                <div class="progress-text">${getTranslation(stepData.progressTextKey)}</div>
                            </div>
                        </div>
                    </div>
                    <div class="quote-details">
                        <div class="detail-item">
                            <div class="detail-value">96%</div>
                            <div>${getTranslation(stepData.accuracyLabelKey)}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-value">10${getTranslation(stepData.minuteUnitKey)}</div>
                            <div>${getTranslation(stepData.timeLabelKey)}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-value">${getTranslation(stepData.autoValueKey)}</div>
                            <div>${getTranslation(stepData.methodLabelKey)}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-value">${getTranslation(stepData.immediateValueKey)}</div>
                            <div>${getTranslation(stepData.sendLabelKey)}</div>
                        </div>
                    </div>
                `;
            }
            return '';
        }

        // ì‹œë®¬ë ˆì´ì…˜ ë‹¨ê³„ ìƒì„± í•¨ìˆ˜
        function createSimulationStep(stepData) {
            const stepDiv = document.createElement('div');
            stepDiv.className = 'simulation-step';
            
            const title = getTranslation(stepData.titleKey);
            const content = createGyeonuStep(stepData);
            
            stepDiv.innerHTML = `
                <h3 class="step-title">${title}</h3>
                ${content}
            `;
            return stepDiv;
        }

        // í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì• ë‹ˆë©”ì´ì…˜ í•¨ìˆ˜
        function animateProgress(progressId, targetPercent, duration = 3000) {
            if (!progressId) return Promise.resolve();
            
            return new Promise(resolve => {
                const progressBar = document.getElementById(progressId);
                if (!progressBar) {
                    resolve();
                    return;
                }

                let currentPercent = 0;
                const increment = targetPercent / (duration / 50);
                
                const interval = setInterval(() => {
                    currentPercent += increment;
                    if (currentPercent >= targetPercent) {
                        currentPercent = targetPercent;
                        clearInterval(interval);
                        setTimeout(resolve, 500);
                    }
                    progressBar.style.width = currentPercent + '%';
                }, 50);
            });
        }

        // ìë™ ìŠ¤í¬ë¡¤ í•¨ìˆ˜
        function smoothScrollToElement(element, offset = -100) {
            const elementPosition = element.getBoundingClientRect().top;
            const offsetPosition = elementPosition + window.pageYOffset + offset;

            window.scrollTo({
                top: offsetPosition,
                behavior: 'smooth'
            });
        }

        // ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰ í•¨ìˆ˜
        async function runSimulation() {
            const startBtn = document.getElementById('startBtn');
            const comparisonView = document.getElementById('comparisonView');
            const simulationArea = document.getElementById('simulationArea');
            const introSection = document.getElementById('intro');
            const simulationSection = document.getElementById('simulation');
            
            if (isRunning) return;
            
            isRunning = true;
            startBtn.textContent = getTranslation('simulation.gyeonu.running') || 'â³ ì‹œë®¬ë ˆì´ì…˜ ì§„í–‰ ì¤‘...';
            startBtn.disabled = true;
            
            // ì¸íŠ¸ë¡œ ìˆ¨ê¸°ê³  ì‹œë®¬ë ˆì´ì…˜ ë³´ì´ê¸°
            introSection.style.display = 'none';
            simulationSection.style.display = 'block';
            
            // ê¸°ì¡´ ë‚´ìš© ì •ë¦¬
            simulationArea.innerHTML = '';
            document.getElementById('result').style.display = 'none';
            
            // ë¹„êµ ë·° í‘œì‹œ
            comparisonView.style.display = 'grid';
            // ë¹„êµ ë·°ë¡œ ìŠ¤í¬ë¡¤
            smoothScrollToElement(comparisonView);
            await new Promise(resolve => setTimeout(resolve, 3000));
            
            // ì‹œë®¬ë ˆì´ì…˜ ë‹¨ê³„ ì‹¤í–‰ - ìƒˆë¡œìš´ ë°ì´í„° êµ¬ì¡° ì‚¬ìš©
            const allSteps = [...simulationSteps, ...finalSteps];
            
            // ê° ë‹¨ê³„ë³„ë¡œ ì‹¤í–‰
            for (const stepData of allSteps) {
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                const stepElement = createSimulationStep(stepData);
                simulationArea.appendChild(stepElement);
                
                // ìƒˆë¡œ ì¶”ê°€ëœ ë‹¨ê³„ë¡œ ìë™ ìŠ¤í¬ë¡¤
                smoothScrollToElement(stepElement);
                
                // í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì• ë‹ˆë©”ì´ì…˜
                if (stepData.progressId && stepData.progressTarget) {
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    await animateProgress(stepData.progressId, stepData.progressTarget);
                }
            }

            // ì™„ë£Œ í›„ ì²˜ë¦¬
            await new Promise(resolve => setTimeout(resolve, 2000));
            document.getElementById('result').style.display = 'block';
            // ì™„ë£Œ ë©”ì‹œì§€ë¡œ ìŠ¤í¬ë¡¤
            smoothScrollToElement(document.getElementById('result'));
            
            startBtn.textContent = getTranslation('simulation.gyeonu.restart') || 'ğŸ”„ ë‹¤ì‹œ ì²´í—˜í•˜ê¸°';
            startBtn.disabled = false;
            isRunning = false;
            
            // ì¬ì‹œì‘ì„ ìœ„í•´ ë‹¤ì‹œ ì„¤ì •
            startBtn.addEventListener('click', function() {
                document.getElementById('intro').style.display = 'block';
                document.getElementById('simulation').style.display = 'none';
                document.getElementById('result').style.display = 'none';
                startBtn.textContent = getTranslation('simulation.gyeonu.startButton') || 'ğŸ’¼ ê²¬ì  ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘';
                smoothScrollToElement(document.getElementById('intro'));
            }, { once: true });
        }

        // ìƒë‹´ ì‹ ì²­ í•¨ìˆ˜
        function requestConsultation() {
            if (typeof window.openConsultationModal === 'function') {
                window.openConsultationModal();
            } else {
                alert('ê²¬ìš° êµ¬í˜„ ìƒë‹´ ì‹ ì²­ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.\ní‚¨í”„ë¦¬ ë‹´ë‹¹ìê°€ 24ì‹œê°„ ë‚´ì— ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤!');
            }
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ - í˜ì´ì§€ ì™„ì „ ë¡œë“œ í›„ ì„¤ì •
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ’¼ ê²¬ìš° AI ì‹œë®¬ë ˆì´ì…˜ì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤!');
            
            // ì•½ê°„ì˜ ì§€ì—° í›„ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ (i18n ë¡œë“œ ì™„ë£Œ ëŒ€ê¸°)
            setTimeout(() => {
                const startBtn = document.getElementById('startBtn');
                if (startBtn) {
                    // ê¸°ì¡´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±° í›„ ì¬ë“±ë¡
                    startBtn.removeEventListener('click', runSimulation);
                    startBtn.addEventListener('click', runSimulation);
                    console.log('âœ… ì‹œì‘ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ì™„ë£Œ');
                    
                    // ë²ˆì—­ ìƒíƒœ í™•ì¸
                    console.log('ğŸŒ í˜„ì¬ translations:', !!window.translations);
                    console.log('ğŸ”§ i18n ê°ì²´:', !!window.i18n);
                    if (window.i18n && window.i18n.t) {
                        console.log('ğŸ“ ìƒ˜í”Œ ë²ˆì—­:', getTranslation('simulation.gyeonu.startButton'));
                    } else {
                        console.warn('âš ï¸ i18n ì‹œìŠ¤í…œì´ ì•„ì§ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤');
                    }
                } else {
                    console.error('âŒ ì‹œì‘ ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!');
                }
            }, 200); // airië³´ë‹¤ ì¡°ê¸ˆ ë” ê¸¸ê²Œ ëŒ€ê¸°
        });
    </script>
</body>
</html>
